# 高并发抢票系统

## 技术选型
**SpringBoot、SpringCloud、Nacos、Sentinel、MybatisPlus、Redis、Kafka、Elasticsearch、Mysql、ShardingSphere**

## 项目描述


### 解决方案与亮点

#### 架构设计
- 采用**微服务架构**，按照业务维度拆分成多个服务，针对购票场景中的高并发及大数据存储问题，设计了多种优化方案。

#### 数据存储与分库分表
- 使用 **ShardingSphere** 进行分库分表，解决海量数据存储问题。
- 订单表采用**基因法分片算法**，支持全路由查询，优化查询性能。

#### 并发性能优化
- 引入多种锁机制（**本地锁、分布式锁、读写锁、双重检测、细化锁粒度**）提升系统并发能力。
- 使用 **Lua + Redis** 原子性操作实现余票数量更新，无锁化设计大幅减轻数据库压力。

#### 业务逻辑优化
- 使用**模板模式和策略模式**封装项目初始化行为，统一管理执行动作与顺序，提升代码复用性。
- 基于**组合模式和树形结构**设计验证组件，实现复杂业务验证逻辑的统一管理。

#### 用户注册场景优化
- 通过 **Lua + Redis** 结合并发量动态判断是否需要图形验证码。
- 使用**计数器**和**布隆过滤器**解决缓存穿透问题，减少无效请求对系统的影响。

#### 缓存优化
- 使用**多级缓存结构**：
  - Redis 缓存热点数据（字符串、哈希表、有序集合）。
  - **Caffeine** 作为高效本地缓存，进一步提高查询效率。

#### 消息队列与异步化
- 使用 **Kafka** 实现异步创建订单功能，解耦用户下单与订单创建流程。
- 确保余票一致性下最大化用户抢票并发能力。

## 参考来源
https://gitee.com/java-up-up/damai
